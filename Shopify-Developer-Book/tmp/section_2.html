<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title></title>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="style.css"/>
  </head>

  <body>
    <div class="chapter">
      <h2 id='the_shopify_platform'>The Shopify Platform</h2>

<p>Since it&#8217;s release to the public as a hosted e-commerce platform, Shopify has evolved through the adoption of new functionalities, the introduction of new features, as well as the refinement of the interface presented to Shop owners. As much as we all know competition drives companies to improve their products and services, in the niche domain of hosted e-commerce there are enough platforms to choose from that the decision to use one does require some careful study, thought and analysis. My experience over the years as a Shopify developer has informed me on how best to use the platform and when not to shut the door on possibilities.</p>

<p>For the sake of simplicity and consistency there are some definitions that will help in understanding the perspective of this book. The most important definition is the one for Shopify App. Shopify has an API and it allows external computer programs to interact with a shop according to certain rules. If an attempt is made to communicate via the API to a shop, and that request is authenticated it will go through and probably return some data as XML or JSON. Maybe that request will return HTML in a separate website. As long as the request is formatted correctly and has the right authentication token it will work. A Shopify App is an externally hosted website that has been setup to connect to a Shop. Shopify merchants can plugin external Apps to their shops to provide additional functionality. A Shopify App is like an Android or iPhone App but it is usually found in the Shopify App store. The process of installing an App for a merchant usually involves approving the App for installation and sometimes approving a charge to use the App too. Some Apps are free, others have a monthly recurring fee and some offer a one-time fee as well. The sign-up and installation for Shopify Apps is very much like any other App installation procedure. It is entirely possible for a merchant to develop or pay to have developed an App that will only ever be installed and used in his or her shop. There is no real limit to the number of uses for Apps as far as Shopify is concerned. This is a very powerful argument for why Shopify is a leader in hosted e-commerce as the API and platform are very well done for this kind of computing. Apps can be hosted in the cloud, on a personal server and even run off of laptops in a coffee shop. They consume resources but they are entirely outside the scope of Shopify&#8217;s data center and Shopify&#8217;s technical support.</p>

<p>The diagram presented here shows the relationships three specific types of people will have with Shopify, namely the customer, the merchant and the Shopify App developer.</p>
<div class='figure'>
  <img alt='The Shopify Platform and Users' src='../images/platform.png' />
</div>
<p>A customer will typically only interact with a shop. A shop may in fact interact with Shopify using the Javascript API to do Ajax. Both the merchant and the App developer also interact with the shop to ensure it is rendering properly. The merchant runs the shop and deals with orders. Merchants may also login to their Apps to control things like fulfillments, inventory management, communications with customers, status updates of orders and any number of other things. App developers will also likely be logging in to the App to ensure operations are optimal. It is possible for both the merchant and the app developer as well as the customer to utilize an App that presents a public facing web presence. For example, the customers could login at <em>someapp.fizzbuzz.com</em> to check on their order status. The merchant might very well login at <em>someapp.fizzbuzz.com/admin/</em> to deal with setting up special aspects of their orders. Finally, all shop WebHooks and perhaps some internal link added to the shop by the App would be accessed at <em>someapp.fizzbuzz.com/shopify/</em> through the Shopify authentication mechanism.</p>

<h3 id='shop_administration'>Shop Administration</h3>

<p>One of the most important aspects of setting up and managing a shop for online sales has to be the web based user interface for controlling products, orders, themes, navigation, collections and all the many aspects that make up a Shopify shop. Originallly Shopify provided some very basic templates to build a shop and the support functions for setting up an inventory of products and collections. The limited amount of functionality made it possible to open up a shop quickly that looked good. As the number of merchants expanded from hundreds to tens of thousands the administrative interface became the focus of much attention. Every button or link click is under constant scrutiny with lots of public discussion on how changes affected merchants. The administration interface functions as an example of a well thought out design that relies on incremental change as opposed to radical make-overs. Considering the backlash a lot of web applications generate by changing their look and feel Shopify has done a great job of delivering improvements while maintaining consistentecy. Merchants have to invest in learning Shopify and so it would seem problematic to be constantly changing the way they interact with their shop. The early version of product tags was a text based interface. Adding or removing tags was not intuitive or awkward but it was not clear how tags worked to improve a shop for customers. Providing some examples and guidance on tags and using them with collections to filter products, they became a much more useful part of administration. Tags are now managed with a nicer interface of clickable pills. New merchants to Shopify do not have the luxury of seeing how Shopify has evolved but that does not mean the history is not evident to merchants with longer term accounts.</p>

<h3 id='liquid_templating'>Liquid Templating</h3>

<p>Web application developers have adapted numerous patterns and techniques for delivering the HTML that makes up the <em>look</em> and <em>feel</em> of a web application. The first popular web application platforms usually rendered information through a combination of what is commonly referred to as spaghetti code. The mixing of scripting code with output code. PHP was and still is one of the best sources to find examples of this pattern where you can be sure developers will be mixing authentication code, SQL database code, form code and other HTML elements directly in the same file. The obvious problem with this mess is that it keeps programmers, designers and integrators all working on the same code. This usually resulted in only programmers being able to perform all those functions. A great innovation was to separate the two camps, keeping programming the responsibility of only the programmer, and letting designers look after the views. The introduction of templating for web applications meant a template could render the look when the applications scripting provided the data. That is a pretty good pattern for systems where the end user is also the owner of the data and most Wordpress sites function this way.</p>

<p>With a hosted platform like Shopify there is simply no chance that a merchant can directly script their shop due to the high probability that a merchant would destroy valuable data with a single erroneous command. Instead Shopify provides merchants with secure and non-destructive access to all the shop&#8217;s data, while providing sophistication in terms of rendering that data nicely. The templating project was created by Tobias Luttke and is called <a href='https://github.com/Shopify/liquid'>Liquid</a>. It&#8217;s an open-source templating language that is the real star of the Shopify platform for merchants and theme designers. Liquid provides access to shop data without requiring merchants to have secret database passwords or requiring them to create and run complex SQL database queries. Liquid provides common programming idioms like <em>looping</em> over sets of data, making <em>conditional branches</em> to do one thing or another, and also has been setup by Shopify to provide a large set of very useful <em>filters</em> that can be applied to data.</p>

<p>The Liquid processing phase is crucial to solid merchant understanding of Shopify. A request from a customer on the Internet for a shop at <em>someshop.myshopify.com</em> arrives. Shopify locates the shop and loads up the <em>theme.liquid</em> file for the shop. By processing the <em>theme.liquid</em> code line by line, a series of assets get pulled into the theme. Examples would be the cascading style sheets (CSS) and Javascript needed by the shop. Each <em>theme.liquid</em> file has to specify where to render or draw the content of the current request which could be the homepage, a product, a blog, a collection or even the cart. Shopify determines the correct liquid file to pull in and adds it to the whole page once it has been processed. A theme file like <em>product.liquid</em> can specify snippets of Liquid code to include in the processing chain. Sometimes it is beneficial to take special aspects of a shop like a homepage carousel showing off products and keeping all that code together in a snippet. Snippets can be re-used on other parts of the site by simply including the snippet in the liquid files that need them. Once all of the code is assembled, processed and added together, the Liquid is quickly converted into HTML and that gets output as a complete web page for the customer.</p>

<p>The implication for merchants and developers to note is that they cannot inject code into Liquid. You cannot use Javascript to alter Liquid. It must be understood that Liquid is going to completely process all the shop data and provide the HTML Document Object Model (DOM) that is rendering in a web browser. Shopify provides an opportunity to take advantage of this Liquid rendering stage to make theme rendering somewhat programmable. Any settings that a theme provides as Liquid get processed too. One example of where this comes in handy is in the style sheets for a site. You can name a CSS file <em>uncle-bob.css.liquid</em> and this file will be processed with any Liquid being turned into actual CSS directives. A merchant that wants to make their text <em>bold</em> and <em>red</em> instead of <em>italic</em> and <em>blue</em> could make the changes using the shops theme settings link where these options are presented. There is a huge amount of creativity available with this system and it keeps merchants and developers on track since they cannot break their shop. Totally illegal and bad Liquid will usually generate an error and not be saved or used. Shopify is also all about speed and is one of the <em>fastest</em> hosted platforms available thanks in large part to Liquid that has been compiled into HTML and aggressively cached. If five, ten or even hundreds of people all request the same shop at the same time, they will all get the same copy of the HTML in their browser quickly. Shopify will not be compiling the Liquid five, ten or hundreds times, but instead will deliver the shop from fast cache nearest the customer. This is why it is important for merchants and developers to write efficient Liquid when possible. It is very easy to setup loops within loops within loops to provide a clever shopping experience, but when analysed with an algorithmic eye, these kinds of Liquid constructs are inefficient but they do work. Shopify will not usually interfere with how people use Liquid.</p>
<div class='figure'>
  <img alt='Possible Distributions of Shops and Their Uses of the Shopify Platform' src='../images/TypesOfShops2.png' />
</div>
<h3 id='javascript_api'>Javascript API</h3>

<p>Javascript is usually used inside web browsers on HTML documents. Web applications use HTTP GET and POST to process requests and generate responses for those browsers. Every submit button or link click can result in a whole new web page being sent to the browser. Microsoft developed Asynchronous HTTP that came to be widely known as Ajax (or XHR). Ajax allowed a web site to send a request to a server and then listen for the reply which could come later using a callback function. This radically changed the entire web since it meant a website could replace a small part of itself with new information and not the entire page. Shopify fully embraces this with the Javascript API. Any shop can use Javascript to send Ajax requests. An example would be to load a cart with 16 products each with a unique quantity. Once that completes, another request could then request the contents of the cart to get the total price of all the items in the cart. Javascript can set a cart note from the homepage. It can delete a product in the cart from the product page. There is a whole world of very useful scripting that can be done with basic Javascript and the Javascript API. The Javascript API truly is a crucial and wonderful aspect of developing shops on the Shopify platform.</p>

<p>There are some interesting Javascript files apart from the Shopify Javascript API that are available to help make shops more sophisticated in the presentation of products. The most common is probably the <em>option selector</em> code available for shops that want to present products with various options like colour, size or material. The natural HTML element to use when presenting options is the <em>select</em> element. The use of options can increase the number of variants dramatically. A product that has three colours, four sizes and six different materials generates seventy-two variants! Shopify allows up to one hundred variants per product. The Javascript option selector code presents each option in it&#8217;s own select element making it pretty easy for a customer to select from the available colours, sizes and materials to quickly find the variant they want to purchase. It also allows a merchant to present when variants are sold out or even to completely hide unavailable products. Shopify offers a small Javascript file that will hide any options that are sold out allowing a shop to present only variants that are actually in stock. This is a very handy extension to the usual option selector code.</p>

<p>There is also free Javascript that can present estimated shipping costs in the cart where they can be seen before checkout. The customer sees a form that collects the general location for delivery via a zip or postal code, and then uses the Shopify API to query the shipping services setup for the shop. For shops that offer expensive small items eg: jewelery, or ones that offer relatively cheap large items eg: stuffed animals, shipping can be a real problem to accommodate well. Freight is calculated on dimensional packaging and not necessarily weight. The Shopify shipping estimator can really help customers see a close approximation of the true price of a purchase before any shocks occur at checkout and that can really help converting carts into sales.</p>

<p>Shopify also provides some Javascript called <em>Customizr</em>. If a merchant has to record a name for engraving on a glass baby bottle, or collect the initials to be monogrammed on a leather handbag, or any other number of customization tasks, it is almost certain that collecting this information will be done using <em>cart attributes</em>. Cart attributes are passed right through checkout with the order and are available in the <em>Order Notes</em> section of the order details. Cart attributes can be rendered in the order confirmation email to inform the customer of their purchase details. Further excellent opportunities exist to help a shop since orders can be sent to a custom App using WebHooks. A custom App can perform additional business logic based on the cart note and cart attributes as well. This is described in more detail when talking of App development itself elsewhere in this guide. Using cart attributes to collect information is <em>complex</em>. This is because a merchant has to collect data at the product presentation level while recognizing previous customization efforts. When switching to the cart view of things shoppers will often want more than one of something, and the customization code has to manage quantity too. When shoppers remove an item from their cart, any corresponding cart attributes have to be dealt with. Checkout is separate from the shop and if a shopper starts checkout but then decides to revisit the shop, all the customization has to be available. Hence any code to handle customization has to be rock solid and demonstrate a mastery of browser features like localStorage, cookies, and the ability to serialize data as JSON. Ultimately a merchant has to be able to know a glass baby bottle gets etched with the name &#8220;Eddy&#8221; and a handbag gets the initials &#8220;G.B.H&#8221; or &#8220;S.N.F.U&#8221;. Customizr can go a long way to making this possible without a major investment in custom Javascript code since Shopify provides it.</p>

<h3 id='shopify_api'>Shopify API</h3>

<p>For merchants and developers the <a href='http://api.shopify.com/'>Shopify API</a> is the most important and best feature of Shopify as an e-commerce platform. For those that like convenience (and really who doesn&#8217;t) the various available API wrappers offer excellent opportunities to work with shops and their data. The <a href='https://github.com/Shopify/shopify_api'>Ruby version</a> provides a command line interface (CLI) that is described elsewhere in this book that can be used to query a shop using the API with just a few lines of code. It is possible to alter every product in a shop by changing the product&#8217;s <em>type</em> or <em>vendor</em>. This beats downloading the inventory as CSV and editing those values followed by importing that CSV and waiting many minutes.</p>

<p>Developers should join the <a href='https://app.shopify.com/services/partners'>Shopify Partner</a> program to begin working with Shopify merchants on both their shops and on Apps. The partner application allows developers to create Test Shops and Apps. To get started when creating an App it needs a name and once created it generates an API token and a shared secret and can thus be installed in a shop. An App can issue HTTP requests using XML or JSON formatted data. An App that formulates requests as per the Shopify API can thus be used to provide additional functionality to a shop. Apps can be created to add features to just one shop as a private exercise, or they can be created to be installed in thousands of shops, offering their provided functionality to all those shops. Hosting an App in the cloud makes it easy to ensure that the App has the resources to handle hundreds or thousands of installations. Some developers prefer to run their own servers and that works equally well. To test Apps out they can even be on a laptop located in a coffee shop.</p>

<p>The API itself is well described by Shopify but it may still be opaque to merchants and developers exactly what this API can be used for. One example that justifies the use of a custom App and the API is a shop that sells works of art, an online art gallery. Art is a unique domain with some specific quirks that make it interesting and perhaps non-traditional for e-commerce. A work of art, say a painting is for sale as a product. Paintings can be organized into collections just as they might be in a gallery or museum. For example paintings for sale might be grouped as abstract or contemporary or mixed media or as a print. The challenge for a gallery is to present all the unique attributes of a piece of art. A painting belongs to an Artist who almost certainly has a biography. A painting has a history in that it has likely been toured around other galleries and museums. Each such exhibition adds some value to the story of the painting and has to be told. The history, artist information and other meta data is best captured as resources attached to the painting, not as something you just stuff inside the paintings description. Using the API it is easy to capture this meta data and create resources that can be attached to each product. Thus a shop can manage products for sale so that they render their own history without it being tightly coupled to the product description. Using an App and the API it is possible to capture all the unique details supporting a product as resources and to present those resources when needed.</p>

<p>To make a gallery style shop easier to manage these extra resources have to be available to the merchant and designer so they can be presented in the shop&#8217;s theme as Liquid. An App has an option to add an <em>App Proxy</em> that serves as a <em>special page</em> in a shop. A gallery shop can navigate clients to the special page and render all the custom resources. An example for the concept of an Artist is when showing the special page there is a Liquid template that contains custom Liquid tags.</p>
<div class='highlight'><pre>&lt;div class=&quot;artist&quot;&gt;
  &lt;h2 class=&quot;artist-name&quot;&gt;{{ artist.name }}&lt;/h2&gt;
  &lt;p&gt;{{ artist.country }}&lt;/p&gt;
  &lt;p&gt;{{ artist.biography }}&lt;/p&gt;
&lt;/div&gt;
</pre>
</div>
<p>When a customer visits this page there is a brief request made to the App Proxy providing the App with the artist&#8217;s identification like their name. The App looks for a Liquid template it installed in the shop, and it reads that template since it could&#8217;ve been altered by the merchant or theme designer. The App Proxy then searches the App for the artist&#8217;s information based on the provided name and once found, it replaces the liquid tags with the appropriate information. The App then sends back the Liquid template for processing by Shopify. Customers will see the artist&#8217;s information like their name, country and biography, along with a collection of the artist&#8217;s paintings, all rendered from a standard Shopify collection. There are endless possibilities and combinations that can be created with Apps and the App Proxy.</p>

<p>The combination of the Shopify API, externally hosted Apps and their App Proxies provide merchants and developers with an amazing degree of latitude to make shops that go far beyond the basics of selling snowboards or t-shirts. Constant development and improvement to these platform features ensure we&#8217;ll be seeing incredibly slick and interesting shops in the future.</p>

<h3 id='theme_store'>Theme Store</h3>

<p>When Shopify went public there were just a handful of themes available. Merchants could download these themes as zip files and tinker with the HTML, Javascript, CSS and Liquid constructs using a text editor. There were three ways to see the effect of editing a theme. One was to edit the theme on your computer, zip compress the edited files and upload them to the shop. A second way was to edit the theme directly inside the shop administration screens. This was not a great option at that time since Javascript editors were primitive and error prone. The third was provided by a web application called Vision that you installed on your computer. Vision provided a small inventory of snowboards for sale and the shop templates showing off the theme changes the merchant made. This approach was panned and ultimately abandoned as it failed to keep up with Shopify itself. A lot of merchants had trouble with theme changes that always showed snowboards for sale. The Vision inventory of products and pages and collections could be hacked since it was just a text based YAML file, but this was also tedious and prone to error. Most merchants were happy when Shopify abandoned Vision and decided to provide test shops to work off of instead. As mentioned when you become a Shopify Partner you can create as many test shops as you need and you can assign as many themes as you want to them. You can also load an real inventory into a test shop so this provides a great way to develop a theme without the risk of borking a live production shop making sales. At the same time as the Partner program was initiated Shopify presented a <a href='http://themes.shopify.com/'>Theme store</a> where merchants can download free or paid themes. Themes that cost money usually come with features that might otherwise cost merchants money to develop themselves.</p>

<p>For talented web designers that understand the nuances of cross-browser issues with respect to Javascript and Cascading Style Sheets as well as Liquid scripting, having a theme in the Theme store is a great way to make money. It is probable that the first thing a new Shopify merchant will invest in is the look of their shop, hence a visit to the Theme store.</p>

<h3 id='app_store'>App Store</h3>

<p>Like the Theme store, when Shopify released the API and paved the way for Apps to be developed and integrated into shops, they created the <a href='http://apps.shopify.com/'>App store</a> too. The Shopify mantra of keeping the core Shopify feature set simple ensures there is a useful place for custom Apps that can deliver any specific needed extras merchants may demand. There are hundreds of Apps that can be installed in a shop and this number is sure to continue climbing as merchants express their needs.</p>

<p>For Shopify developers the App store presents their App to all the merchants as well as anyone researching the Shopify platform. To make the financial aspect of developing and servicing Apps easier Shopify makes their billing API available to developers. In exchange for 20% of App profits Shopify collects the money from merchants directly and deposits it in the developer&#8217;s Partner account. This is great for developers that do not have access to online credit card processing. It is possible for developers to setup one-time charges, recurring monthly charges and to not worry about payments. Shopify pays developers bi-weekly as of June 2012 making it very similar to working for a company.</p>

<h3 id='shopify_experts'>Shopify Experts</h3>

<p>As the years have passed and Shopify has grown and attracted many more merchants it is only natural that a number of merchants will have needs that exceed the typical features provided by Shopify. These merchants need to know that they can have their special processing needs taken care of without having to launch a complex search for talent. The <a href='http://experts.shopify.com/'>Shopify Experts</a> was launched to showcase talent working on the Shopify platform. Theme designers, App developers, photographers and even accountants can join and they get a chance to show off their portfolio and capabilities. The slots in the Experts showcase for accountants and photographers show these skills are also very much in demand by merchants that want to present the best possible look for their products and services, and to be able to do accurate reports on just what is flowing through their online universe.</p>


    </div>
  </body>
</html>
